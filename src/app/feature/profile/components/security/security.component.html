<div class="security-container">
    <form [formGroup]="securityForm" (ngSubmit)="onSubmit()">
      <!-- Password Change Section -->
      <mat-card class="security-section">
        <mat-card-header>
          <mat-icon mat-card-avatar>lock</mat-icon>
          <mat-card-title>Change Password</mat-card-title>
          <mat-card-subtitle>Update your password to keep your account secure</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field appearance="outline">
            <mat-label>Current Password</mat-label>
            <input matInput type="password" formControlName="currentPassword">
            <mat-icon matSuffix>visibility_off</mat-icon>
          </mat-form-field>
  
          <mat-form-field appearance="outline">
            <mat-label>New Password</mat-label>
            <input matInput type="password" formControlName="newPassword">
            <mat-icon matSuffix>visibility_off</mat-icon>
            <mat-hint>Password must be at least 8 characters long</mat-hint>
          </mat-form-field>
  
          <mat-form-field appearance="outline">
            <mat-label>Confirm New Password</mat-label>
            <input matInput type="password" formControlName="confirmPassword">
            <mat-icon matSuffix>visibility_off</mat-icon>
          </mat-form-field>
  
          <button mat-raised-button color="primary" type="submit">Update Password</button>
        </mat-card-content>
      </mat-card>
  
      <!-- Two-Factor Authentication -->
      <mat-card class="security-section">
        <mat-card-header>
          <mat-icon mat-card-avatar>security</mat-icon>
          <mat-card-title>Two-Factor Authentication</mat-card-title>
          <mat-card-subtitle>Add an extra layer of security to your account</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="two-factor-toggle">
            <mat-slide-toggle formControlName="twoFactorEnabled">
              Enable Two-Factor Authentication
            </mat-slide-toggle>
            <p class="description">When enabled, you'll need to enter a verification code in addition to your password when signing in.</p>
          </div>
  
          <mat-form-field appearance="outline">
            <mat-label>Recovery Email</mat-label>
            <input matInput type="email" formControlName="recoveryEmail">
            <mat-hint>Used for account recovery and security alerts</mat-hint>
          </mat-form-field>
        </mat-card-content>
      </mat-card>
  
      <!-- Login History -->
      <mat-card class="security-section">
        <mat-card-header>
          <mat-icon mat-card-avatar>history</mat-icon>
          <mat-card-title>Login History</mat-card-title>
          <mat-card-subtitle>Recent account activity</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <table mat-table [dataSource]="loginHistory" class="login-history-table">
            <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef>Date & Time</th>
              <td mat-cell *matCellDef="let element">{{element.date}}</td>
            </ng-container>
  
            <ng-container matColumnDef="device">
              <th mat-header-cell *matHeaderCellDef>Device</th>
              <td mat-cell *matCellDef="let element">{{element.device}}</td>
            </ng-container>
  
            <ng-container matColumnDef="location">
              <th mat-header-cell *matHeaderCellDef>Location</th>
              <td mat-cell *matCellDef="let element">{{element.location}}</td>
            </ng-container>
  
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef>Status</th>
              <td mat-cell *matCellDef="let element" [class.success]="element.status === 'Success'" [class.failed]="element.status === 'Failed'">
                {{element.status}}
              </td>
            </ng-container>
  
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </mat-card-content>
      </mat-card>
    </form>
  </div>